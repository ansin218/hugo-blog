<!DOCTYPE html>
<html lang="en-US" />
<head>

    


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZB9892ST3J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZB9892ST3J');
</script>


<script type="application/ld+json">
    
</script>


    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <meta name="google-site-verification" content="0hFsIlifUylXTWnwQ5sywPUPmRoqdg78M-R-4otV_wc" />
    <meta name="p:domain_verify" content="a0dd9b4555b8a9eb0855dd8b8733681d"/>

    <title>Web Scraping With Python - Text Scraping Wikipedia - Ankur Sinha</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://ankuroh.com/favicon.png" />
    <link rel="canonical" href="https://ankuroh.com/programming/automation/web-scraping-with-python-text-scraping-wikipedia/" />

     <meta name="description" content="This is a tutorial to perform web scraping with Python and beautifulsoup library. The tutorial demonstrates an example by text scraping Wikipedia." /> 

     
    
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://images2.imgbox.com/16/9b/Slkgb6Hx_o.jpg"/>
    
 
    <meta name="twitter:title" content="Web Scraping With Python - Text Scraping Wikipedia"/>
    <meta name="twitter:description" content="This is a tutorial to perform web scraping with Python and beautifulsoup library. The tutorial demonstrates an example by text scraping Wikipedia."/>
    <meta name="twitter:url" content="https://ankuroh.com/programming/automation/web-scraping-with-python-text-scraping-wikipedia/" />
    <meta name="twitter:site" content="@"/>

    <meta property="og:site_name" content="" />
    <meta property="og:title" content="Web Scraping With Python - Text Scraping Wikipedia &middot; Ankur Sinha" />
    <meta property="og:url" content="https://ankuroh.com/programming/automation/web-scraping-with-python-text-scraping-wikipedia/" />
    

    <meta property="og:type" content="article" />
    <meta property="og:description" content="This is a tutorial to perform web scraping with Python and beautifulsoup library. The tutorial demonstrates an example by text scraping Wikipedia." />

    <meta property="article:published_time" content="2019-08-29T21:38:40&#43;01:00" />
    

    <meta property="og:image" content="https://images2.imgbox.com/16/9b/Slkgb6Hx_o.jpg"/>


    <meta name="generator" content="Hugo 0.118.2">

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="https://ankuroh.com/built/screen.css" /> 
    <link rel="stylesheet" type="text/css" href="https://ankuroh.com/css/casper-two.css" /> 
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
    

     

</head>


<body class="post-template">
  <div class="site-wrapper"> 

  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5NSCK83"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  

<header class="site-header outer">
  <div class="inner">
    <nav class="site-nav">
      <div class="site-nav-left">

        <ul class="nav" role="menu">
        
        
        
            <li class="" role="menuitem">
              <a href="/">Home</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/subscribe/">Subscribe</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/recipes/">Recipes</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/travelogue/">Travel</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/programming/">Programming</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/support/">Support</a>
            </li>
        
      </ul></div>

      <div class="site-nav-right">
        <div class="social-links">
                    

                    

                    <a class="social-link" href="https://github.com/ansin218" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>

                    <a class="social-link" href="https://www.linkedin.com/in/ansin218" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 50 512 512"><path d="M150.65,100.682c0,27.992-22.508,50.683-50.273,50.683c-27.765,0-50.273-22.691-50.273-50.683 C50.104,72.691,72.612,50,100.377,50C128.143,50,150.65,72.691,150.65,100.682z M143.294,187.333H58.277V462h85.017V187.333z M279.195,187.333h-81.541V462h81.541c0,0,0-101.877,0-144.181c0-38.624,17.779-61.615,51.807-61.615 c31.268,0,46.289,22.071,46.289,61.615c0,39.545,0,144.181,0,144.181h84.605c0,0,0-100.344,0-173.915 s-41.689-109.131-99.934-109.131s-82.768,45.369-82.768,45.369V187.333z" /></svg></a>

                    

                    

                    <a class="social-link" href="https://stackoverflow.com/users/1592364/ankur-sinha" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="-135 22 32 38"><path d="M-128,45.4l16.2,3.4l0.7-3.2l-16.2-3.4L-128,45.4z M-125.9,37.6l15,7l1.4-3l-15-7L-125.9,37.6z     M-121.7,30.2l12.7,10.6l2.1-2.5l-12.7-10.6L-121.7,30.2z M-113.5,22.4l-2.7,2l9.9,13.3l2.7-2L-113.5,22.4z M-128.4,52.9h16.6    v-3.3h-16.6V52.9z"/></svg></a>
                    
                    
        
                    
        </div>
            
      </div>

    </nav>  

  </div>
</header>

<main id="site-main" class="site-main outer" role="main">
  <div class="inner">
    
      <article class="post-full post"> 
    <header class="post-full-header">
        <section class="post-full-meta">
            <time class="post-full-meta-date" datetime="2019-08-29">29 August 2019</time>
        </section>
        <h1 class="post-full-title">Web Scraping With Python - Text Scraping Wikipedia</h1>
    </header>

    

    <section class="post-full-content">
        <div class="kg-card-markdown">
        <p>In this tutorial, we will be web scraping with Python and a library called beautifulsoup to learn how to get data from websites online, especially if you have no option to download them in anyway. To do so, we will be text scraping Wikipedia to get the list of megacities in this world. In addition, we will also scrape the images of the city in another tutorial and store it locally in our system. Before you do this, head over to the <code>robots.txt</code> file to read through the rules once to know what Wikipedia allows or disallows. To read more about the legality of web scraping, please read my other article: <a href="https://www.ankuroh.com/programming/automation/is-web-scraping-legal/">Is Web Scraping Legal</a></p>
<p>The link from which we will scrape is: <a href="https://en.wikipedia.org/wiki/Megacity">https://en.wikipedia.org/wiki/Megacity</a></p>
<p>If you scroll down the page, you should come across a table looking like this:
<img src="/img/programming/megacities-wikipedia.png" alt="alt text" title="Megacities Wikipedia"></p>
<p>Every time you request information from a website, a piece of information known as the user agent is sent from your end. Too many requests in a few seconds that is humanly not possible can help the target system know that you are requesting information through a bot. Although this is not required for this scraping task, we will see how to fake this user agent information randomly for every request using the <a href="https://pypi.org/project/fake-useragent/">fake_useragent</a> library.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#f92672">from</span> fake_useragent <span style="color:#f92672">import</span> UserAgent
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">5</span>):
</span></span><span style="display:flex;"><span>    ua2 <span style="color:#f92672">=</span> UserAgent()
</span></span><span style="display:flex;"><span>    print(ua2<span style="color:#f92672">.</span>random)
</span></span></code></pre></div><p>Each time you create a new instance of the UserAgent(), you will get different values that will be passed while requesting information the target system in place. It is to be noted that there can be websites with advanced systems in place to detect such cases and block you despite using such libraries.</p>
<p>The result of the above output will look like:</p>
<pre tabindex="0"><code>Mozilla/5.0 (Windows NT 10.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/40.0.2214.93 Safari/537.36
Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.17 Safari/537.36
Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.93 Safari/537.36
Mozilla/5.0 (X11; CrOS i686 4319.74.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/29.0.1547.57 Safari/537.36
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/36.0.1944.0 Safari/537.36
</code></pre><p>Since we will be web scraping only one link, we will go ahead with the following block of code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#f92672">from</span> fake_useragent <span style="color:#f92672">import</span> UserAgent
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ua1 <span style="color:#f92672">=</span> UserAgent()
</span></span><span style="display:flex;"><span>randomHeader <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;User-Agent&#39;</span>:str(ua1<span style="color:#f92672">.</span>random)}
</span></span></code></pre></div><p>Now, we will mention the link to scrape. To do this, we use the <a href="http://docs.python-requests.org/en/master/">requests</a> library:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#f92672">import</span> requests
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>scrapeLink <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://en.wikipedia.org/wiki/Megacity&#39;</span>
</span></span><span style="display:flex;"><span>page <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(scrapeLink, randomHeader)
</span></span></code></pre></div><p>Next, we will get the entire content of the page in HTML format using a library called <a href="https://pypi.org/project/beautifulsoup4/">beautifulsoup4</a>. To do so, write:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#f92672">from</span> bs4 <span style="color:#f92672">import</span> BeautifulSoup
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>soup <span style="color:#f92672">=</span> BeautifulSoup(page<span style="color:#f92672">.</span>content, <span style="color:#e6db74">&#39;html.parser&#39;</span>)
</span></span></code></pre></div><p>You can notice that the entire source code of the wiki page has been stored inside this <code>soup</code> variable. From this point, knowledge of HTML can help in grasping the concept of extracting the target data easily. However, I will try to make it as clear as possible for people without HTML knowledge as well.</p>
<p>Head to the webpage from your browser and locate where your information is in the webpage by checking out the <strong>Page Source</strong> or <strong>Source Code</strong> of the webpage. On carefully going through the code, you can notice that our information is located somewhere and looks like the image below.</p>
<p><img src="/img/programming/source-code-wikipedia-article.png" alt="alt text" title="Source Code Wikipedia Article"></p>
<p>From this, we can conclude that our information is residing inside the <code>&lt;table&gt;</code> tags. However, there can be multiple tables in the source code and we want to extract the table that is relevant to us. To do this, you can go back to the source code and look for <code>&lt;table</code>. You will see the number of tables that are there on the webpage. Find out which table from the top is yours. At the time of writing this article, it is the second table which we need.</p>
<p>To find all the tables and get the content of the second table, we will do:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>megaTable <span style="color:#f92672">=</span> soup<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;table&#39;</span>)[<span style="color:#ae81ff">1</span>]
</span></span></code></pre></div><p>Our <code>megaTable</code> variable now has the source code of the table from which we need to extract the rank, city and country. To extract further information, let us inspect which part of this table we need to access. The code below is for the first two cities. We will however do it for all the cities.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-HTML" data-lang="HTML"><span style="display:flex;"><span>&lt;<span style="color:#f92672">table</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sortable wikitable&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;horizontal_align:center; vertical_align:center; text=align:left; background:#FFFFF;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">tbody</span>&gt;&lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">th</span>&gt;Rank&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">th</span>&gt;Megacity&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">th</span>&gt;Image&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">th</span>&gt;Country&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">th</span>&gt;Continent&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">th</span>&gt;Population
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">th</span>&gt;&lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;1&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/wiki/Tokyo&#34;</span> <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Tokyo&#34;</span>&gt;Tokyo&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;image&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/wiki/File:Skyscrapers_of_Shinjuku_2009_January.jpg&#34;</span>&gt;&lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Skyscrapers of Shinjuku 2009 January.jpg&#34;</span> <span style="color:#a6e22e">data-file-height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1364&#34;</span> <span style="color:#a6e22e">data-file-width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2560&#34;</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;64&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Skyscrapers_of_Shinjuku_2009_January.jpg/120px-Skyscrapers_of_Shinjuku_2009_January.jpg&#34;</span> <span style="color:#a6e22e">srcset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Skyscrapers_of_Shinjuku_2009_January.jpg/180px-Skyscrapers_of_Shinjuku_2009_January.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Skyscrapers_of_Shinjuku_2009_January.jpg/240px-Skyscrapers_of_Shinjuku_2009_January.jpg 2x&#34;</span> <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;120&#34;</span>/&gt;&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/wiki/Japan&#34;</span> <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Japan&#34;</span>&gt;Japan&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/wiki/Asia&#34;</span> <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Asia&#34;</span>&gt;Asia&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;38,140,000&lt;<span style="color:#f92672">sup</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;reference&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cite_ref-UN_WUP_2016_6-0&#34;</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#cite_note-UN_WUP_2016-6&#34;</span>&gt;[6]&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">sup</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">td</span>&gt;&lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;2&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/wiki/Shanghai&#34;</span> <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Shanghai&#34;</span>&gt;Shanghai&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;image&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/wiki/File:The_bund_shanghai.jpg&#34;</span>&gt;&lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;The bund shanghai.jpg&#34;</span> <span style="color:#a6e22e">data-file-height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2832&#34;</span> <span style="color:#a6e22e">data-file-width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;4256&#34;</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;81&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/f/f4/The_bund_shanghai.jpg/122px-The_bund_shanghai.jpg&#34;</span> <span style="color:#a6e22e">srcset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/f/f4/The_bund_shanghai.jpg/183px-The_bund_shanghai.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/f/f4/The_bund_shanghai.jpg/244px-The_bund_shanghai.jpg 2x&#34;</span> <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;122&#34;</span>/&gt;&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/wiki/China&#34;</span> <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;China&#34;</span>&gt;China&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/wiki/Asia&#34;</span> <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Asia&#34;</span>&gt;Asia&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">td</span>&gt;34,000,000&lt;<span style="color:#f92672">sup</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;reference&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cite_ref-oecd2015_7-0&#34;</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#cite_note-oecd2015-7&#34;</span>&gt;[7]&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">sup</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">td</span>&gt;&lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>And so on
</span></span></code></pre></div><p>As you can see, all the data that we want to extract is inside the <code>&lt;td&gt;</code> tags. So, to extract information from here, we will create an empty list, loop through all the <code>&lt;td&gt;</code> tags and extract the text between the opening and closing tags:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>rowValList <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(megaTable<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;td&#39;</span>))):
</span></span><span style="display:flex;"><span>    rowVal <span style="color:#f92672">=</span> megaTable<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;td&#39;</span>)[i]<span style="color:#f92672">.</span>get_text()
</span></span><span style="display:flex;"><span>    rowValList<span style="color:#f92672">.</span>append(rowVal)
</span></span></code></pre></div><p>Our rowValList variable will look like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>[<span style="color:#e6db74">&#39;1&#39;</span>, <span style="color:#e6db74">&#39;Tokyo&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#e6db74">&#39;Japan&#39;</span>, <span style="color:#e6db74">&#39;Asia&#39;</span>, <span style="color:#e6db74">&#39;38,140,000[6]</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74">&#39;2&#39;</span>, <span style="color:#e6db74">&#39;Shanghai&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#e6db74">&#39;China&#39;</span>, <span style="color:#e6db74">&#39;Asia&#39;</span>, <span style="color:#e6db74">&#39;34,000,000[7]</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>, <span style="color:#f92672">....</span> ]
</span></span></code></pre></div><p>We now have the data that we wanted. From this list, we can write loops to extract the rank, megacity and country and put it in a dataframe to for neater display of the required information.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>rankList <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>, len(rowValList), <span style="color:#ae81ff">6</span>):
</span></span><span style="display:flex;"><span>    rankList<span style="color:#f92672">.</span>append(rowValList[i])
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>cityList <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, len(rowValList), <span style="color:#ae81ff">6</span>):
</span></span><span style="display:flex;"><span>    cityList<span style="color:#f92672">.</span>append(rowValList[i])
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>countryList <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">3</span>, len(rowValList), <span style="color:#ae81ff">6</span>):
</span></span><span style="display:flex;"><span>    countryList<span style="color:#f92672">.</span>append(rowValList[i])
</span></span></code></pre></div><p>We will create a dataframe out of this list using <a href="https://pandas.pydata.org/">pandas</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>megaDf <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame()
</span></span><span style="display:flex;"><span>megaDf[<span style="color:#e6db74">&#39;Rank&#39;</span>] <span style="color:#f92672">=</span> rankList
</span></span><span style="display:flex;"><span>megaDf[<span style="color:#e6db74">&#39;City&#39;</span>] <span style="color:#f92672">=</span> cityList
</span></span><span style="display:flex;"><span>megaDf[<span style="color:#e6db74">&#39;Country&#39;</span>] <span style="color:#f92672">=</span> countryList
</span></span></code></pre></div><p>Here is a final look of our scraped data:</p>
<p><img src="/img/programming/scraped-data.png" alt="alt text" title="Final Scraped Data"></p>
<p>Congratulations on your web scraping with Python assignment where you scraped a Wikipedia article for some texts. You can now scrape to get the data you want. To learn how to scrape images with Python, head over to this article: <a href="https://www.ankuroh.com/programming/automation/web-scraping-with-python-image-scraping/">Web Scraping With Python - Image Scraping</a></p>
    
        </div>
    </section>

    <footer class="post-full-footer">
      <section class="author-card">
        <img class="author-profile-image" src="https://ankuroh.com/img/ankur.jpeg" alt="Author" />
        <section class="author-card-content">
            <h4 class="author-card-name"><a href="https://ankuroh.com/">Ankur Sinha</a></h4>
                <p>Data Science, Running, Blogging, Cooking, Traveling, Writing</p>
        </section>
      </section>
    </footer>
</article>
    
    
    

  </div>
</main>


<aside class="read-next outer">
  <div class="inner">
    <div class="read-next-feed">      
      

      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://ankuroh.com/programming/automation/web-scraping-with-python-image-scraping/">
      <div class="post-card-image" style="background-image: url(https://images2.imgbox.com/7b/2c/ogHuAXMX_o.jpg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://ankuroh.com/programming/automation/web-scraping-with-python-image-scraping/">
          <header class="post-card-header">
              
              <h2 class="post-card-title">Web Scraping With Python - Image Scraping</h2>
          </header>
          <section class="post-card-excerpt">
               
                <p>This is a tutorial to perform web scraping with Python and beautifulsoup library. The tutorial demonstrates an example by scraping images from Wikipedia.</p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://ankuroh.com/img/ankur.jpeg" alt="Author" />
          <span class="post-card-author"><a href="/">Ankur Sinha</a></span>
      </footer>
    </div>
</article>
      
      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://ankuroh.com/programming/automation/is-web-scraping-legal/">
      <div class="post-card-image" style="background-image: url(https://images2.imgbox.com/c2/5e/Tltzsa8F_o.jpg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://ankuroh.com/programming/automation/is-web-scraping-legal/">
          <header class="post-card-header">
              
              <h2 class="post-card-title">Is Web Scraping Legal</h2>
          </header>
          <section class="post-card-excerpt">
               
                <p>Is web scraping legal? This article answers this popular question and discusses what one needs to look into before scraping the web.</p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://ankuroh.com/img/ankur.jpeg" alt="Author" />
          <span class="post-card-author"><a href="/">Ankur Sinha</a></span>
      </footer>
    </div>
</article>
      
    </div>
  </div>
</aside>

<div class="floating-header">
  <div class="floating-header-logo">
    <a href="https://ankuroh.com/">
      
      <span></span>
    </a>
  </div>
  <span class="floating-header-divider">&mdash;</span>
  <div class="floating-header-title">Web Scraping With Python - Text Scraping Wikipedia</div>
  <div class="floating-header-share">
    <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
     <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg>
    </div>
    
    <a class="floating-header-share-tw" href="https://twitter.com/share?text=Web%20Scraping%20With%20Python%20-%20Text%20Scraping%20Wikipedia&amp;url=https%3a%2f%2fankuroh.com%2fprogramming%2fautomation%2fweb-scraping-with-python-text-scraping-wikipedia%2f"
          onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
      </a>
      <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fankuroh.com%2fprogramming%2fautomation%2fweb-scraping-with-python-text-scraping-wikipedia%2f"
          onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
      </a>
  </div>

  <progress class="progress" value="0">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>
</div>



<footer class="site-footer outer">
  <div class="site-footer-content inner">
    <section class="copyright" style="line-height: 1.3em;">
      <a href="/">Ankur Sinha</a>  <br>
      
    </section>
    <nav class="site-footer-nav">
      <a href="/privacy-policy/">Privacy Policy</a>
        
        
        <a href="https://github.com/ansin218" target="_blank" rel="noopener">Github</a>
        <a href="https://www.linkedin.com/in/ansin218" target="_blank" rel="noopener">LinkedIn</a>
        
        
        <a href="https://stackoverflow.com/users/1592364/ankur-sinha" target="_blank" rel="noopener">Stackoverflow</a>
        
        
    </nav>  
  </div>
</footer>

</div>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://ankuroh.com/js/jquery.fitvids.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


  <!-- Google Analytics -->
  <script>
    var _gaq=[['_setAccount','G-ZB9892ST3J'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>


<script async defer data-pin-hover="true" data-pin-tall="true" src="//assets.pinterest.com/js/pinit.js"></script>
    <script>





$(document).ready(function () {
    
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>
</body></html>
