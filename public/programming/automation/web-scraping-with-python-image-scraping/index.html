<!DOCTYPE html>
<html lang="en-US" />
<head>

    


<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZB9892ST3J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZB9892ST3J');
</script>


<script type="application/ld+json">
    
</script>


    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <meta name="google-site-verification" content="0hFsIlifUylXTWnwQ5sywPUPmRoqdg78M-R-4otV_wc" />
    <meta name="p:domain_verify" content="a0dd9b4555b8a9eb0855dd8b8733681d"/>

    <title>Web Scraping With Python - Image Scraping - Ankur Sinha</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://ankuroh.com/favicon.png" />
    <link rel="canonical" href="https://ankuroh.com/programming/automation/web-scraping-with-python-image-scraping/" />

     <meta name="description" content="This is a tutorial to perform web scraping with Python and beautifulsoup library. The tutorial demonstrates an example by scraping images from Wikipedia." /> 

     
    
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://images2.imgbox.com/7b/2c/ogHuAXMX_o.jpg"/>
    
 
    <meta name="twitter:title" content="Web Scraping With Python - Image Scraping"/>
    <meta name="twitter:description" content="This is a tutorial to perform web scraping with Python and beautifulsoup library. The tutorial demonstrates an example by scraping images from Wikipedia."/>
    <meta name="twitter:url" content="https://ankuroh.com/programming/automation/web-scraping-with-python-image-scraping/" />
    <meta name="twitter:site" content="@"/>

    <meta property="og:site_name" content="" />
    <meta property="og:title" content="Web Scraping With Python - Image Scraping &middot; Ankur Sinha" />
    <meta property="og:url" content="https://ankuroh.com/programming/automation/web-scraping-with-python-image-scraping/" />
    

    <meta property="og:type" content="article" />
    <meta property="og:description" content="This is a tutorial to perform web scraping with Python and beautifulsoup library. The tutorial demonstrates an example by scraping images from Wikipedia." />

    <meta property="article:published_time" content="2019-08-30T19:38:46&#43;01:00" />
    

    <meta property="og:image" content="https://images2.imgbox.com/7b/2c/ogHuAXMX_o.jpg"/>


    <meta name="generator" content="Hugo 0.118.2">

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="https://ankuroh.com/built/screen.css" /> 
    <link rel="stylesheet" type="text/css" href="https://ankuroh.com/css/casper-two.css" /> 
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
    

     

</head>


<body class="post-template">
  <div class="site-wrapper"> 

  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5NSCK83"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  

<header class="site-header outer">
  <div class="inner">
    <nav class="site-nav">
      <div class="site-nav-left">

        <ul class="nav" role="menu">
        
        
        
            <li class="" role="menuitem">
              <a href="/">Home</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/subscribe/">Subscribe</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/recipes/">Recipes</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/travelogue/">Travel</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/programming/">Programming</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/support/">Support</a>
            </li>
        
      </ul></div>

      <div class="site-nav-right">
        <div class="social-links">
                    

                    

                    <a class="social-link" href="https://github.com/ansin218" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>

                    <a class="social-link" href="https://www.linkedin.com/in/ansin218" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 50 512 512"><path d="M150.65,100.682c0,27.992-22.508,50.683-50.273,50.683c-27.765,0-50.273-22.691-50.273-50.683 C50.104,72.691,72.612,50,100.377,50C128.143,50,150.65,72.691,150.65,100.682z M143.294,187.333H58.277V462h85.017V187.333z M279.195,187.333h-81.541V462h81.541c0,0,0-101.877,0-144.181c0-38.624,17.779-61.615,51.807-61.615 c31.268,0,46.289,22.071,46.289,61.615c0,39.545,0,144.181,0,144.181h84.605c0,0,0-100.344,0-173.915 s-41.689-109.131-99.934-109.131s-82.768,45.369-82.768,45.369V187.333z" /></svg></a>

                    

                    

                    <a class="social-link" href="https://stackoverflow.com/users/1592364/ankur-sinha" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="-135 22 32 38"><path d="M-128,45.4l16.2,3.4l0.7-3.2l-16.2-3.4L-128,45.4z M-125.9,37.6l15,7l1.4-3l-15-7L-125.9,37.6z     M-121.7,30.2l12.7,10.6l2.1-2.5l-12.7-10.6L-121.7,30.2z M-113.5,22.4l-2.7,2l9.9,13.3l2.7-2L-113.5,22.4z M-128.4,52.9h16.6    v-3.3h-16.6V52.9z"/></svg></a>
                    
                    
        
                    
        </div>
            
      </div>

    </nav>  

  </div>
</header>

<main id="site-main" class="site-main outer" role="main">
  <div class="inner">
    
      <article class="post-full post"> 
    <header class="post-full-header">
        <section class="post-full-meta">
            <time class="post-full-meta-date" datetime="2019-08-30">30 August 2019</time>
        </section>
        <h1 class="post-full-title">Web Scraping With Python - Image Scraping</h1>
    </header>

    

    <section class="post-full-content">
        <div class="kg-card-markdown">
        <p>In this tutorial, we will be performing web scraping with Python and beautifulsoup. We will be scraping images of all the megacities of our world as of 2016 from this link: <a href="https://en.wikipedia.org/wiki/Megacity">https://en.wikipedia.org/wiki/Megacity</a></p>
<p>If you scroll down the page, you should come across a table looking like this:
<img src="/img/programming/megacities-wikipedia.png" alt="alt text" title="Megacities Wikipedia"></p>
<p>We will be scraping the images from the <em>Image</em> column shown in the above picture. To do this, we use the <a href="http://docs.python-requests.org/en/master/">requests</a> library first like shown in the following block of code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#f92672">import</span> requests
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>scrapeLink <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://en.wikipedia.org/wiki/Megacity&#39;</span>
</span></span><span style="display:flex;"><span>page <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(scrapeLink)
</span></span></code></pre></div><p>Next, we will get the entire content of the page in HTML format using a library called <a href="https://pypi.org/project/beautifulsoup4/">beautifulsoup4</a>. To do so, write:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#f92672">from</span> bs4 <span style="color:#f92672">import</span> BeautifulSoup
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>soup <span style="color:#f92672">=</span> BeautifulSoup(page<span style="color:#f92672">.</span>content, <span style="color:#e6db74">&#39;html.parser&#39;</span>)
</span></span></code></pre></div><p>You can notice that the entire source code of the wiki page has been stored inside this <code>soup</code> variable. From this point, knowledge of HTML can help in grasping the concept of extracting the target data easily. However, I will try to make it as clear as possible for people without HTML knowledge as well.</p>
<p>Head to the webpage from your browser and locate where your information is in the webpage by checking out the <strong>Page Source</strong> or <strong>Source Code</strong> of the webpage. On carefully going through the code, you can notice that our information is located somewhere and looks like the image below.</p>
<p><img src="/img/programming/source-code-wikipedia-article.png" alt="alt text" title="Source Code Wikipedia Article"></p>
<p>From this, we can conclude that our information is residing inside the <code>&lt;table&gt;</code> tags. However, there can be multiple tables in the source code and we want to extract the table that is relevant to us. To do this, you can go back to the source code and look for <code>&lt;table</code>. You will see the number of tables that are there on the webpage. Find out which table from the top is yours. At the time of writing this article, it is the second table which we need.</p>
<p>To find all the tables and get the content of the second table, we will do:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>megaTable <span style="color:#f92672">=</span> soup<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;table&#39;</span>)[<span style="color:#ae81ff">1</span>]
</span></span></code></pre></div><p>Our <code>megaTable</code> variable now has the source code of the table from which we need to extract the rank, city and country. To extract further information, let us inspect which part of this table we need to access. The code below is for the first two cities. We will however do it for all the cities.</p>
<p>To scrape the images, have a look at the <code>megaTable</code> variable from the page. You can find that links of the images are inside <code>&lt;a&gt;</code> with the name of the class being <code>image</code>. It looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-HTML" data-lang="HTML"><span style="display:flex;"><span>&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;image&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/wiki/File:Meieki_from_Heiwa_Park_Aqua_Tower.jpg&#34;</span>&gt;&lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Meieki from Heiwa Park Aqua Tower.jpg&#34;</span> <span style="color:#a6e22e">data-file-height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;3840&#34;</span> <span style="color:#a6e22e">data-file-width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;5900&#34;</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;78&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/2/26/Meieki_from_Heiwa_Park_Aqua_Tower.jpg/120px-Meieki_from_Heiwa_Park_Aqua_Tower.jpg&#34;</span> <span style="color:#a6e22e">srcset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/2/26/Meieki_from_Heiwa_Park_Aqua_Tower.jpg/180px-Meieki_from_Heiwa_Park_Aqua_Tower.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/2/26/Meieki_from_Heiwa_Park_Aqua_Tower.jpg/240px-Meieki_from_Heiwa_Park_Aqua_Tower.jpg 2x&#34;</span> <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;120&#34;</span>/&gt;&lt;/<span style="color:#f92672">a</span>&gt;
</span></span></code></pre></div><p>From each of these <code>&lt;a&gt;</code> with class name <code>image</code>, we will extract the value of <code>href</code> attribute.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>imgLinkList <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> imgLink <span style="color:#f92672">in</span> megaTable<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;a&#39;</span>, {<span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;image&#39;</span>}):
</span></span><span style="display:flex;"><span>    partialLink <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://en.wikipedia.org/&#39;</span> <span style="color:#f92672">+</span> imgLink[<span style="color:#e6db74">&#39;href&#39;</span>]
</span></span></code></pre></div><p>Inside the above loop, we will try to create a new fake user agent every time, perform a request for the content to the link of the image, and try to get the link of the real raw image.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>ua1 <span style="color:#f92672">=</span> UserAgent()
</span></span><span style="display:flex;"><span>randomHeader <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;User-Agent&#39;</span>: str(ua1<span style="color:#f92672">.</span>random)}
</span></span><span style="display:flex;"><span>imgPage <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(partialLink, randomHeader)
</span></span><span style="display:flex;"><span>imgSoup <span style="color:#f92672">=</span> BeautifulSoup(imgPage<span style="color:#f92672">.</span>content, <span style="color:#e6db74">&#39;html.parser&#39;</span>)
</span></span></code></pre></div><p>If you have followed the previous tutorial on how to find the relevant information from source code, by now you must know what to look for and how to get it. However, if you are still lost, what we are trying to do is access the above link to get the raw image link. The raw image link is residing inside a <code>&lt;div&gt;</code> tag with the class name <code>fullImageLink</code> inside the value from the variable <code>partialLink</code> which iterates through the links of all the megacities.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>fullImgDiv <span style="color:#f92672">=</span> imgSoup<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;div&#39;</span>, {<span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;fullImageLink&#39;</span>})
</span></span></code></pre></div><p>The content inside the <code>fullImgDiv</code> looks like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-HTML" data-lang="HTML"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fullImageLink&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;file&#34;</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/c/c1/PalacioEjecutivodelPeru.jpg&#34;</span>&gt;&lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;File:PalacioEjecutivodelPeru.jpg&#34;</span> <span style="color:#a6e22e">data-file-height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2400&#34;</span> <span style="color:#a6e22e">data-file-width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;3600&#34;</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;533&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/c/c1/PalacioEjecutivodelPeru.jpg/800px-PalacioEjecutivodelPeru.jpg&#34;</span> <span style="color:#a6e22e">srcset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/c/c1/PalacioEjecutivodelPeru.jpg/1200px-PalacioEjecutivodelPeru.jpg 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/c/c1/PalacioEjecutivodelPeru.jpg/1599px-PalacioEjecutivodelPeru.jpg 2x&#34;</span> <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;800&#34;</span>/&gt;&lt;/<span style="color:#f92672">a</span>&gt;&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mw-filepage-resolutioninfo&#34;</span>&gt;Size of this preview: &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mw-thumbnail-link&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/c/c1/PalacioEjecutivodelPeru.jpg/800px-PalacioEjecutivodelPeru.jpg&#34;</span>&gt;800 × 533 pixels&lt;/<span style="color:#f92672">a</span>&gt;. &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mw-filepage-other-resolutions&#34;</span>&gt;Other resolutions: &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mw-thumbnail-link&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/c/c1/PalacioEjecutivodelPeru.jpg/320px-PalacioEjecutivodelPeru.jpg&#34;</span>&gt;320 × 213 pixels&lt;/<span style="color:#f92672">a</span>&gt; | &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mw-thumbnail-link&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/c/c1/PalacioEjecutivodelPeru.jpg/640px-PalacioEjecutivodelPeru.jpg&#34;</span>&gt;640 × 427 pixels&lt;/<span style="color:#f92672">a</span>&gt; | &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mw-thumbnail-link&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/c/c1/PalacioEjecutivodelPeru.jpg/1024px-PalacioEjecutivodelPeru.jpg&#34;</span>&gt;1,024 × 683 pixels&lt;/<span style="color:#f92672">a</span>&gt; | &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mw-thumbnail-link&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/thumb/c/c1/PalacioEjecutivodelPeru.jpg/1280px-PalacioEjecutivodelPeru.jpg&#34;</span>&gt;1,280 × 853 pixels&lt;/<span style="color:#f92672">a</span>&gt; | &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mw-thumbnail-link&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//upload.wikimedia.org/wikipedia/commons/c/c1/PalacioEjecutivodelPeru.jpg&#34;</span>&gt;3,600 × 2,400 pixels&lt;/<span style="color:#f92672">a</span>&gt;.&lt;/<span style="color:#f92672">span</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span></code></pre></div><p>The raw image link is inside the first <code>&lt;a&gt;</code> tag within the <code>href</code> attribute. We will extract this value next.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>fullImgLink <span style="color:#f92672">=</span> fullImgDiv[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;a&#39;</span>)[<span style="color:#ae81ff">0</span>]
</span></span></code></pre></div><p>We will add the https: value to this link and add the links to the imgLinkList that we created earlier.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span>fullImg <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https:&#39;</span> <span style="color:#f92672">+</span> fullImgLink[<span style="color:#e6db74">&#39;href&#39;</span>]
</span></span><span style="display:flex;"><span>imgLinkList<span style="color:#f92672">.</span>append(fullImg)
</span></span></code></pre></div><p>As said earlier, the above blocks of codes must be inside the initial loop. Hence, your final block of code must look like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> imgLink <span style="color:#f92672">in</span> megaTable<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;a&#39;</span>, {<span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;image&#39;</span>}):
</span></span><span style="display:flex;"><span>    partialLink <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://en.wikipedia.org/&#39;</span> <span style="color:#f92672">+</span> imgLink[<span style="color:#e6db74">&#39;href&#39;</span>]
</span></span><span style="display:flex;"><span>    ua1 <span style="color:#f92672">=</span> UserAgent()
</span></span><span style="display:flex;"><span>    randomHeader <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;User-Agent&#39;</span>: str(ua1<span style="color:#f92672">.</span>random)}
</span></span><span style="display:flex;"><span>    imgPage <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(partialLink, randomHeader)
</span></span><span style="display:flex;"><span>    imgSoup <span style="color:#f92672">=</span> BeautifulSoup(imgPage<span style="color:#f92672">.</span>content, <span style="color:#e6db74">&#39;html.parser&#39;</span>)
</span></span><span style="display:flex;"><span>    fullImgDiv <span style="color:#f92672">=</span> imgSoup<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;div&#39;</span>, {<span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;fullImageLink&#39;</span>})
</span></span><span style="display:flex;"><span>    fullImgLink <span style="color:#f92672">=</span> fullImgDiv[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>find_all(<span style="color:#e6db74">&#39;a&#39;</span>)[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    fullImg <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https:&#39;</span> <span style="color:#f92672">+</span> fullImgLink[<span style="color:#e6db74">&#39;href&#39;</span>]
</span></span><span style="display:flex;"><span>    imgLinkList<span style="color:#f92672">.</span>append(fullImg)
</span></span></code></pre></div><p>We now have a list of the links of raw images of all the megacities. We will now scrape them using the <a href="https://docs.python.org/3/library/urllib.html">urllib</a> library. We will also rename the image with the name of the city.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Python" data-lang="Python"><span style="display:flex;"><span><span style="color:#f92672">from</span> urllib.request <span style="color:#f92672">import</span> urlopen, Request, urlretrieve
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> urllib
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(imgLinkList)):
</span></span><span style="display:flex;"><span>    imgName <span style="color:#f92672">=</span> cityList[i] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;.jpg&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>urlretrieve(imgLinkList[i], imgName)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#39;Image Not Found&#39;</span>)
</span></span></code></pre></div><p>You must now have the images of all the megacities stored inside the same folder as your scraping script. Congratulations on scraping images using Python and beautifulsoup. To learn web scraping texts with Python, head over to this article: <a href="https://www.ankuroh.com/programming/automation/web-scraping-with-python-text-scraping-wikipedia/">Web Scraping With Python - Text Scraping Wikipedia</a></p>
    
        </div>
    </section>

    <footer class="post-full-footer">
      <section class="author-card">
        <img class="author-profile-image" src="https://ankuroh.com/img/ankur.jpeg" alt="Author" />
        <section class="author-card-content">
            <h4 class="author-card-name"><a href="https://ankuroh.com/">Ankur Sinha</a></h4>
                <p>Data Science, Running, Blogging, Cooking, Traveling, Writing</p>
        </section>
      </section>
    </footer>
</article>
    
    
    

  </div>
</main>


<aside class="read-next outer">
  <div class="inner">
    <div class="read-next-feed">      
      

      
      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://ankuroh.com/programming/automation/web-scraping-with-python-text-scraping-wikipedia/">
      <div class="post-card-image" style="background-image: url(https://images2.imgbox.com/16/9b/Slkgb6Hx_o.jpg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://ankuroh.com/programming/automation/web-scraping-with-python-text-scraping-wikipedia/">
          <header class="post-card-header">
              
              <h2 class="post-card-title">Web Scraping With Python - Text Scraping Wikipedia</h2>
          </header>
          <section class="post-card-excerpt">
               
                <p>This is a tutorial to perform web scraping with Python and beautifulsoup library. The tutorial demonstrates an example by text scraping Wikipedia.</p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://ankuroh.com/img/ankur.jpeg" alt="Author" />
          <span class="post-card-author"><a href="/">Ankur Sinha</a></span>
      </footer>
    </div>
</article>
      
    </div>
  </div>
</aside>

<div class="floating-header">
  <div class="floating-header-logo">
    <a href="https://ankuroh.com/">
      
      <span></span>
    </a>
  </div>
  <span class="floating-header-divider">&mdash;</span>
  <div class="floating-header-title">Web Scraping With Python - Image Scraping</div>
  <div class="floating-header-share">
    <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
     <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg>
    </div>
    
    <a class="floating-header-share-tw" href="https://twitter.com/share?text=Web%20Scraping%20With%20Python%20-%20Image%20Scraping&amp;url=https%3a%2f%2fankuroh.com%2fprogramming%2fautomation%2fweb-scraping-with-python-image-scraping%2f"
          onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
      </a>
      <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fankuroh.com%2fprogramming%2fautomation%2fweb-scraping-with-python-image-scraping%2f"
          onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
      </a>
  </div>

  <progress class="progress" value="0">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>
</div>



<footer class="site-footer outer">
  <div class="site-footer-content inner">
    <section class="copyright" style="line-height: 1.3em;">
      <a href="/">Ankur Sinha</a>  <br>
      
    </section>
    <nav class="site-footer-nav">
      <a href="/privacy-policy/">Privacy Policy</a>
        
        
        <a href="https://github.com/ansin218" target="_blank" rel="noopener">Github</a>
        <a href="https://www.linkedin.com/in/ansin218" target="_blank" rel="noopener">LinkedIn</a>
        
        
        <a href="https://stackoverflow.com/users/1592364/ankur-sinha" target="_blank" rel="noopener">Stackoverflow</a>
        
        
    </nav>  
  </div>
</footer>

</div>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://ankuroh.com/js/jquery.fitvids.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


  <!-- Google Analytics -->
  <script>
    var _gaq=[['_setAccount','G-ZB9892ST3J'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>


<script async defer data-pin-hover="true" data-pin-tall="true" src="//assets.pinterest.com/js/pinit.js"></script>
    <script>





$(document).ready(function () {
    
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>
</body></html>
